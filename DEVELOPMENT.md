# 開発環境構築手順

このドキュメントでは、`time_manager`アプリケーションの開発環境をセットアップする手順について説明します。

## 1. 前提条件

開発を始める前に、以下のツールがインストールされていることを確認してください。

- [Node.js](https://nodejs.org/) (v18以上を推奨)
- [Git](https://git-scm.com/)

## 2. リポジトリのクローン

まず、プロジェクトのリポジトリをローカルマシンにクローンします。

```bash
git clone git@github.com:sanpicule/time_manager.git
cd time_manager
```

## 3. バックエンドのセットアップ

次に、バックエンドサーバーのセットアップを行います。

### 3.1. 依存関係のインストール

プロジェクトのルートディレクトリで、以下のコマンドを実行して必要なパッケージをインストールします。

```bash
npm install
```

### 3.2. Google API認証情報の設定

このアプリケーションは、Googleスプレッドシートをデータベースとして利用しており、Google APIを呼び出すための認証情報が必要です。

1.  **Google Cloudでサービスアカウントを作成:**
    - Google Cloud Consoleでプロジェクトを選択または作成します。
    - 「APIとサービス」 > 「有効なAPIとサービス」に移動し、「Google Sheets API」と「Google Drive API」が有効になっていることを確認します。
    - 「APIとサービス」 > 「認証情報」に移動し、「認証情報を作成」 > 「サービスアカウント」を選択します。
    - サービスアカウントに名前を付け、作成して続行します。
    - 「キーを管理」 > 「鍵を追加」 > 「新しい鍵を作成」を選択し、キーのタイプとして**JSON**を選択して作成します。
    - `credentials.json`という名前のファイルがダウンロードされます。

2.  **`credentials.json`の配置:**
    - ダウンロードした`credentials.json`ファイルを、このプロジェクトのルートディレクトリ（`.gitignore`と同じ階層）に配置します。このファイルは`.gitignore`によってリポジトリにはコミットされないため、安全です。

3.  **スプレッドシートの共有:**
    - `credentials.json`ファイルを開き、`client_email`の項目に記載されているメールアドレスをコピーします。
    - データベースとして使用するGoogleスプレッドシートを開き、右上の「共有」ボタンをクリックします。
    - コピーしたメールアドレスを共有相手として追加し、「編集者」の権限を与えます。

## 4. フロントエンドのセットアップ

続いて、フロントエンド（Reactアプリケーション）のセットアップを行います。

### 4.1. 依存関係のインストール

`client`ディレクトリに移動し、以下のコマンドを実行します。

```bash
cd client
npm install
```

## 5. アプリケーションの実行

バックエンドとフロントエンドは、それぞれ個別のターミナルで起動する必要があります。

### 5.1. バックエンドの起動

プロジェクトの**ルートディレクトリ** (`time_manager/`) で、以下のコマンドを実行します。

```bash
npm start
```

サーバーが`http://localhost:3001`で起動します。

### 5.2. フロントエンドの起動

**`client`ディレクトリ** (`time_manager/client/`) で、以下のコマンドを実行します。

```bash
npm start
```

Reactの開発サーバーが起動し、ブラウザで`http://localhost:3000`が自動的に開きます。フロントエンドは、バックエンドのAPI（`http://localhost:3001`）と通信するように設定されています。

## 6. データベースについて

このアプリケーションは、Googleスプレッドシートをデータベースとして使用します。
設定は`server.js`ファイル内にハードコードされています。

- **スプレッドシートID:** `SPREADSHEET_ID`
- **シート名:** `SHEET_NAME`

必要に応じてこれらの値を変更してください。
